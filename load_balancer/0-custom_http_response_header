#!/usr/bin/env bash
# Configures Nginx to add a custom HTTP header X-Served-By

# Install Nginx if not already installed
apt-get update -y
apt-get install -y nginx

# Insert the header into the default server block
if ! grep -q "add_header X-Served-By" /etc/nginx/sites-available/default; then
    sed -i '/server_name _;/a \    add_header X-Served-By $hostname;' /etc/nginx/sites-available/default
fi

# Reload Nginx to apply changes
systemctl restart nginx
